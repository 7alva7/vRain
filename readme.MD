
![image](https://github.com/shanleiguang/vRain/blob/main/images/cover.png)

##vRain is  

- vRain是一款中文古籍刻本风格直排电子书制作工具。
- 参考中文古籍雕版刻本制作过程，首先生成书叶背景图，根据行数、每行字数形成一个自右向左、自上而下的位置数组，然后把文本逐字打印到对应位置，打满一页、新建一页，直到所有文字处理完。
- 文本编辑准备和自动排版生成分离，使用者将主要精力用在文本编辑准备。
- 一个背景图对应一个配置文件。一本书对应一个配置文件。
- 百万字书籍十几分钟生成。
- 采用Perl语言开发，需安装Image::Magick和PDF::Builder等模块。
- 小红书主页：兀雨书屋。

##基本功能  

- 书叶背景图的书房名、尺寸、列数、框线粗细及颜色均可配置，支持单双、顺对、黑白鱼尾自定义。
- 支持批注文字的小字双排显示。
- 正文、批注文字的字体、大小、颜色、位置可配置。
- 正文文字、批注文字、标点符号的上、下、左、右位置均可微调以达到最佳呈现效果。
- 一主多辅字体，主字体不支持时自动采用辅字体补字。
- 某字符主字体不支持时，可尝试简繁转换以改善支持情况，但可能产生与语境不符问题。
- 标点符号替换规则、过滤规则可配置。
- 标点符号可归一化为句号，仅用于句读。
- 常用标点符号可设置为不占字符位置，页面文字更紧凑，贴近古籍刻本风格。
- 书名号、单双引号直排旋转九十度。书名号可调整为侧边线。
- 根据文本序号自动生成PDF目录，如第x回、卷x。
  
##使用说明  

- 程序能够实现中英文标点符号、数字替换，但仍建议首先编辑原始文本为中文数字和标点符号。
- 保持文本编码和字体标准的一致性，如台标繁体文本采用台标繁体字体。
- 保留字符：'@'代表空格，'%'代表强制换页符，'【】'内代表双排的批注文字。