
![image](https://github.com/shanleiguang/vRain/blob/main/cover.png)

# vRain is  

- vRain是一款中文古籍刻本風格直排電子書製作工具。
- 參考中文古籍雕版刻本製作過程，首先生成書葉背景圖，根據行數、每行字數形成一個自右向左、自上而下的位置數組，然後把文本逐字打印到對應位置，打滿一頁、新建一頁，直到所有文字處理完。
- 文本編輯準備和自動排版生成分離，使用者將主要精力放在文本的編輯準備即可。
- 一個背景圖對應一個配置文件。一本書對應一個配置文件。
- 百萬字書籍十幾分鐘生成。
- 採用Perl語言開發，可在Linux、MacOS、Windows平台運行，需安裝Image::Magick、PDF::Builder等模塊。
- 除中文外，亦可用於製作其他直排風格語言文字，如西夏文、滿文。
- 個人小紅書主頁：兀雨書屋。

# Example

![image](https://github.com/shanleiguang/vRain/blob/main/images/000.png)

# 基本功能  

- 書葉背景圖的書房名、尺寸、列數、框線粗細及顏色均可配置。支持單雙、順對、黑白魚尾。
- 支持生成宣紙做舊風格、竹簡風格的背景圖。
- 支持批注文字小字雙排。
- 正文、批注文字的字體、大小、顏色、位置可配置。
- 正文文字、批注文字、標點符號的上、下、左、右位置均可微調以達到最佳呈現效果。
- 一主多輔字體，主字體不支持時自動採用輔字體補字。
- 某字符主字體不支持時，可嘗試簡繁轉換以改善支持情況，但可能產生與語境不符問題。
- 標點符號替換規則、過濾規則可配置。
- 標點符號可歸一化為句號，僅用於句讀。
- 常用標點符號可設置為不佔字符位置，頁面文字更緊湊，貼近古籍刻本風格。
- 書名號、單雙引號直排旋轉九十度。書名號可調整為側邊線。
- 根據文本序號自動生成PDF目錄，如第x回、卷x。
  
# 使用說明  

- 程序能夠實現中英文標點符號、數字替換，但仍建議首先編輯原始文本為中文數字和標點符號。
- 保持文本編碼和字體標準的一致性，如台標繁體文本採用台標繁體字體。
- 保留字符：'@'代表空格，'%'代表強制換頁符，'【】'內代表雙排的批注文字。

# ChangeLog

- 2025/3，新增宣紙做舊風格背景圖生成腳本；新增竹簡風格背景圖生成腳本；新增原始文本字符字體支持情況檢測及替換腳本；新增批量插圖腳本；新增用於整段縮進排版的文本預處理腳本；新增生成PDF壓縮代碼，壓縮比約30倍。

